@*
//------------------------------------------------------------------------------
//  此代码版权声明为全文件覆盖，如有原作者特别声明，会在下方手动补充
//  此代码版权（除特别声明外的代码）归作者本人AlbertZhao所有
//  源代码使用协议遵循本仓库的开源协议及附加协议
//  Gitee源代码仓库：https://gitee.com/AlbertZhao/AlbertCollection



//------------------------------------------------------------------------------
*@

@page "/usercenter"
@layout MainLayout
@inherits CultureComponentBase
@attribute [Authorize]
@namespace AlbertCollection.Web.Rcl
@inject UserResoures UserResoures
<MCard Elevation="1" Class="ma-2">

    <MTabs @bind-Value="tab">
        <MTab Style="height:50px;">
            @T("基本信息")
        </MTab>
        <MTab>
            @T("快捷方式")
        </MTab>
        <MTab>
            @T("修改密码")
        </MTab>
    </MTabs>

    <MTabsItems Value="tab">
        <MTabItem>
            <MContainer>
                <MCard Flat Class="ma-8">
                    <MRow Align="AlignTypes.End" Class="mt-2">
                        <MLabel Class="mx-4">@_updateInfoInput.Description(it=>it.Account)</MLabel>
                        <MLabel>@UserResoures.CurrentUser?.Account</MLabel>
                    </MRow>
                    <MRow Align="AlignTypes.End" Class="mt-2">
                        <MLabel Class="mx-4">@_updateInfoInput.Description(it=>it.Phone)</MLabel>
                        <MTextField Style="max-width:220px;" Class="mt-3 mr-3" Dense HideDetails="true"
                        @bind-Value=@_updateInfoInput.Phone />
                    </MRow>

                    <MRow Align="AlignTypes.End" Class="mt-2">
                        <MLabel Class="mx-4">@_updateInfoInput.Description(it=>it.Email)</MLabel>
                        <MTextField Style="max-width:220px;" Class="mt-3 mr-3" Dense HideDetails="true"
                        @bind-Value=@_updateInfoInput.Email />
                    </MRow>
                    <MCardActions>
                        <MButton Class="mt-8" OnClick=OnUpdateUserInfo Color="primary">
                            @T("保存")
                        </MButton>
                    </MCardActions>
                </MCard>
            </MContainer>
        </MTabItem>
        <MTabItem>
            <MContainer>
                <MCard Flat Class="ma-8">
                    <MRow Align="AlignTypes.Center">
                        <MTreeview Dense OpenAll TItem="SysResourceAc" TKey="long" Selectable @bind-Value="_menusChoice"
                                   Items="UserResoures.Menus" ItemText="r=>r.Title" ItemChildren="r=>r.Children" ItemKey=@(r=>r.Id) />
                    </MRow>

                    <MCardActions>
                        <MButton Class="mt-8" OnClick=OnShortcutSave Color="primary">
                            @T("保存")
                        </MButton>
                    </MCardActions>
                </MCard>
            </MContainer>
        </MTabItem>

        <MTabItem>
            <MContainer>
                <MCard Flat Class="ma-8">
                    <MRow Align="AlignTypes.End" Class="mt-2">
                        <MLabel Class="mx-4">@_passwordInfoInput.Description(it=>it.OldPassword)</MLabel>
                        <MTextField Type="password" Style="max-width:220px;" Class="mt-3 mr-3" Dense HideDetails="true"
                        @bind-Value=@_passwordInfoInput.OldPassword />
                    </MRow>
                    <MRow Align="AlignTypes.End" Class="mt-2">
                        <MLabel Class="mx-4">@_passwordInfoInput.Description(it=>it.NewPassword)</MLabel>
                        <MTextField Type="password" Style="max-width:220px;" Class="mt-3 mr-3" Dense HideDetails="true"
                        @bind-Value=@_passwordInfoInput.NewPassword />
                    </MRow>

                    <MRow Align="AlignTypes.End" Class="mt-2">
                        <MLabel Class="mx-4">@_passwordInfoInput.Description(it=>it.ConfirmPassword)</MLabel>
                        <MTextField Type="password" Style="max-width:220px;" Class="mt-3 mr-3" Dense HideDetails="true"
                        @bind-Value=@_passwordInfoInput.ConfirmPassword />
                    </MRow>
                    <MCardActions>
                        <MButton Class="mt-8" OnClick=OnUpdatePasswordInfo Color="primary">
                            @T("保存")
                        </MButton>
                    </MCardActions>
                </MCard>
            </MContainer>
        </MTabItem>

    </MTabsItems>

</MCard>



